# Development-specific overrides for docker-compose.yml
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up

services:
  # PostgreSQL Database
  postgres:
    ports:
      - "5432:5432"

  # Redis
  redis:
    ports:
      - "6379:6379"

  # Rust Backend API (Development mode with hot reload)
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    environment:
      APP_ENV: development
      APP_LOG_LEVEL: debug
      RUST_LOG: debug
    volumes:
      - ./backend:/app
      - backend_cargo_cache:/usr/local/cargo/registry
      - backend_target:/app/target
    command: cargo watch -x run

  # Nuxt Frontend (Development mode with hot reload)
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    environment:
      NODE_ENV: development
    volumes:
      - ./frontend:/app
      - /app/node_modules
      - /app/.nuxt
    command: npm run frontend

volumes:
  backend_cargo_cache:
  backend_target:
